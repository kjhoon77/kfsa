<?xml version="1.0" encoding="utf-8"?>
<Window>
	<Form BKColor="user0" Height="80" Id="frmtraining0094SInternetJubsuSunapInfo" Left="8" OnKeyDown="Form_OnKeyDown" OnLoadCompleted="Form_OnLoadCompleted" OnUnloadCompleted="Form_OnUnloadCompleted" PidAttrib="7" Style="sty_Form" Title="입금정보DIV" Top="8" Ver="1.0" Width="728" WorkArea="true">
		<Datasets>
			<Dataset DataSetType="Dataset" Id="ds_oPosResult"></Dataset>
		</Datasets>
		<Shape Bottom="76" Height="64" Id="shpGubunBox4" Left="1" LineColor="user15" Right="724" TabOrder="8" Top="12" Type="Rectangle" Width="723"></Shape>
		<Static Align="Center" Height="20" Id="lbPersonNm" Left="4" Style="sty_Label" TabOrder="6" Text="입금자명" Top="52" VAlign="Middle" Width="100"></Static>
		<Static Align="Center" Height="20" Id="lbSetlmGubun" Left="244" Style="sty_Label" TabOrder="7" Text="결제방법" Top="28" VAlign="Middle" Width="84"></Static>
		<Edit AutoSelect="TRUE" Border="Flat" Enable="FALSE" Height="20" Id="edSetlmGubun" ImeMode="native" Left="332" LeftMargin="2" OnFocus="gfn_ComponentOnFocus" OnKeyDown="gfn_EnterNextFocus" OnKillFocus="gfn_ComponentOnKillFocus" Readonly="TRUE" Style="sty_Edit" TabOrder="2" Top="28" Width="292"></Edit>
		<Edit AutoSelect="TRUE" Border="Flat" Enable="FALSE" Height="20" Id="edPersonNm" ImeMode="native" Left="108" LeftMargin="2" OnFocus="gfn_ComponentOnFocus" OnKeyDown="gfn_EnterNextFocus" OnKillFocus="gfn_ComponentOnKillFocus" Readonly="TRUE" Style="sty_Edit" TabOrder="3" Top="52" Width="132"></Edit>
		<Static Align="Center" Height="20" Id="lbJubsuInfo" Left="12" Style="sty_LabelGruopBox" TabOrder="9" Text="입금정보" Top="4" VAlign="Middle" Width="96"></Static>
		<Static Align="Center" Height="20" Id="lbSetlmYn" Left="4" Style="sty_Label" TabOrder="10" Text="결제상태" Top="28" VAlign="Middle" Width="100"></Static>
		<Edit AutoSelect="TRUE" Border="Flat" Enable="FALSE" Height="20" Id="edSetlmYn" ImeMode="native" Left="108" LeftMargin="2" OnFocus="gfn_ComponentOnFocus" OnKeyDown="gfn_EnterNextFocus" OnKillFocus="gfn_ComponentOnKillFocus" Readonly="TRUE" Style="sty_Edit" TabOrder="1" Top="28" Width="132"></Edit>
		<Static Align="Center" Height="20" Id="lbProcDate" Left="460" Style="sty_Label" TabOrder="11" Text="입금일자" Top="52" VAlign="Middle" Width="84"></Static>
		<MaskEdit AutoSelect="TRUE" AutoSkip="TRUE" Border="Flat" Enable="FALSE" Height="20" Id="meProcDate" Left="548" LeftMargin="2" Mask="####-##-##" OnFocus="gfn_ComponentOnFocus" OnKeyDown="gfn_EnterNextFocus" OnKillFocus="gfn_ComponentOnKillFocus" Style="sty_Time" TabOrder="5" Top="52" Type="STRING" Width="76"></MaskEdit>
		<Static Align="Center" Height="20" Id="lbAmount" Left="244" Style="sty_Label" TabOrder="12" Text="입금금액" Top="52" VAlign="Middle" Width="84"></Static>
		<MaskEdit AutoSelect="TRUE" AutoSkip="TRUE" Border="Flat" Enable="FALSE" Height="20" Id="meAmount" Left="332" OnFocus="gfn_ComponentOnFocus" OnKeyDown="gfn_EnterNextFocus" OnKillFocus="gfn_ComponentOnKillFocus" Style="sty_Maskedit" TabOrder="4" Top="52" Width="124"></MaskEdit>
		<Button ButtonStyle="TRUE" Cursor="HAND" Enable="FALSE" Height="22" Id="btnShowVirtualAccount" ImageID="BTN_TEXT_06" Left="628" OnClick="btnShowVirtualAccount_OnClick" Style="sty_Button" TabOrder="13" Text="가상계좌보기" Top="28" Transparent="TRUE" Width="92"></Button>
		<Button ButtonStyle="TRUE" Cursor="HAND" Enable="FALSE" Height="22" Id="btnPrintReRct" ImageID="BTN_TEXT_06" Left="628" OnClick="btnPrintReRct_OnClick" Style="sty_Button" TabOrder="14" Text="영수증재발행" Top="52" Transparent="TRUE" Width="92"></Button>
	</Form>
	<Script><![CDATA[/*
 * 강습접수정보명 : frmtraining0094SInternetJubsuSunapInfo.xml
 * 설명 : 입금정보DIV
 * 작성일 : 2009.09.14
 * 작성자 : 김동현
 */

#include "LIB::COMMON.js"; // 공통 관련

/* 공통 필수 시작 */
function Form_OnLoadCompleted(obj) {
     gfn_Form_OnLoadCompleted(obj); // 공통 폼 로딩 이벤트 처리
}

function btnShowVirtualAccount_OnClick(obj) {

    ds_oPosResult.ClearData();

    tit_clearActionInfo();
    tit_addCsvSearchActionInfo("training:searchInternetPosAccount", false);
    tit_callService(
        ""
        ,""
        ,"" // inDs
        ,"ds_oPosResult=ds_oInternetPosAccount"	// outDs
        ," PCPMYEAR=" + quote(parent.ds_oSunap.GetColumn(0, "PMYEAR"))
            + " PCPMMGNO=" + quote(parent.ds_oSunap.GetColumn(0, "PMMGNO")) // args 
        ,""
        ,false
        ,""
        ,true
    );

    var sArg = ""; // 팝업파라메터
    sArg = "sVirtCloseDate=" + quote(ds_oPosResult.GetColumn(0, "PCCLOSEDATE")); // 가상계좌유효기간
    sArg += " sVirtStat=" + quote(ds_oPosResult.GetColumn(0, "PCFLAG")); // 입금여부(R-계좌 할당,I-입금,C-취소)
    sArg += " sVirtAccountNo=" + quote(ds_oPosResult.GetColumn(0, "PCACCOUNT")); // 계좌번호
    sArg += " sVirtBankCd=" + quote(ds_oPosResult.GetColumn(0, "PCBANKCD")); // 은행코드
    sArg += " sVirtBankNm=" + quote(ds_oPosResult.GetColumn(0, "PCBANKNM")); // 은행명칭
    sArg += " sVirtInputAmount=" + quote(ds_oPosResult.GetColumn(0, "PCAMOUNT")); // 입금액
    sArg += " sVirtBankDate=" + quote(ds_oPosResult.GetColumn(0, "PCBANKDATE")); // 입금/취소일자

	Dialog("COM::frmCOM3401PVirtualAccountPOSResult.xml", sArg, 400, 224, "", -1, -1);

}

function btnPrintReRct_OnClick(obj) {

    if (!gfn_Confirm("영수증을 재발행 하시겠습니까?")) {
        return false;
	}
	
    gfn_PrintReceipt(parent.ds_oSunap.GetColumn(0, "PMYEAR")
        , parent.ds_oSunap.GetColumn(0, "PMMGNO")); // 영수증을 출력한다.
}
]]></Script>
</Window>