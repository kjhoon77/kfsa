<?xml version="1.0" encoding="utf-8"?>
<Window>
	<Form BKColor="user0" Height="388" Id="frmcust2024PPosResultCas" Left="8" OnKeyDown="Form_OnKeyDown" OnLoadCompleted="Form_OnLoadCompleted" OnUnloadCompleted="Form_OnUnloadCompleted" PidAttrib="7" Style="sty_Form" Title="가상계좌&#32;결제&#32;처리결과" TooltipFont="Default,0" Top="8" Ver="1.0" Width="400" WorkArea="true">
		<Shape Bottom="276" Height="264" Id="shpGubunBox4" Left="4" LineColor="user15" Right="396" TabOrder="13" Top="12" Type="Rectangle" Width="392"></Shape>
		<Static Align="Center" Height="20" Id="lbPersonNm" Left="8" Style="sty_Label" TabOrder="7" Text="구매자" Top="52" VAlign="Middle" Width="88"></Static>
		<Static Align="Center" Height="20" Id="lbOrderNo" Left="8" Style="sty_Label" TabOrder="8" Text="주문번호" Top="100" VAlign="Middle" Width="88"></Static>
		<Edit AutoSelect="TRUE" Border="Flat" Enable="FALSE" Height="20" Id="edOrderNo" ImeMode="native" Left="100" LeftMargin="2" OnFocus="gfn_ComponentOnFocus" OnKeyDown="gfn_EnterNextFocus" OnKillFocus="gfn_ComponentOnKillFocus" Readonly="TRUE" Style="sty_Edit" TabOrder="4" Top="100" UserData="S" Width="292"></Edit>
		<Edit AutoSelect="TRUE" Border="Flat" Enable="FALSE" Height="20" Id="edPersonNm" ImeMode="native" Left="100" LeftMargin="2" OnFocus="gfn_ComponentOnFocus" OnKeyDown="gfn_EnterNextFocus" OnKillFocus="gfn_ComponentOnKillFocus" Readonly="TRUE" Style="sty_Edit" TabOrder="2" Top="52" UserData="S" Width="292"></Edit>
		<Static Align="Center" Height="20" Id="lbAmount" Left="8" Style="sty_Label" TabOrder="9" Text="금액" Top="250" VAlign="Middle" Width="88"></Static>
		<Static Align="Center" Height="20" Id="lbSunapGubun1" Left="8" Style="sty_Label" TabOrder="10" Text="납부방법" Top="124" VAlign="Middle" Width="88"></Static>
		<Edit AutoSelect="TRUE" Border="Flat" Enable="FALSE" Height="20" Id="edSunapGubun" ImeMode="native" Left="100" LeftMargin="2" OnFocus="gfn_ComponentOnFocus" OnKeyDown="gfn_EnterNextFocus" OnKillFocus="gfn_ComponentOnKillFocus" Readonly="TRUE" Style="sty_Edit" TabOrder="5" Top="124" UserData="S" Width="292"></Edit>
		<MaskEdit AutoSelect="TRUE" AutoSkip="TRUE" Border="Flat" Enable="FALSE" Height="20" Id="medAmount" Left="100" OnFocus="gfn_ComponentOnFocus" OnKeyDown="gfn_EnterNextFocus" OnKillFocus="gfn_ComponentOnKillFocus" Style="sty_Maskedit" TabOrder="6" Top="250" UserData="S" Width="72"></MaskEdit>
		<Static Align="Center" Height="20" Id="lbProductInfo" Left="8" Style="sty_Label" TabOrder="11" Text="상품정보" Top="76" VAlign="Middle" Width="88"></Static>
		<Edit AutoSelect="TRUE" Border="Flat" Enable="FALSE" Height="20" Id="edProductInfo" ImeMode="native" Left="100" LeftMargin="2" OnFocus="gfn_ComponentOnFocus" OnKeyDown="gfn_EnterNextFocus" OnKillFocus="gfn_ComponentOnKillFocus" Readonly="TRUE" Style="sty_Edit" TabOrder="3" Top="76" UserData="S" Width="292"></Edit>
		<Static Align="Center" Height="20" Id="lbSetlmtGubun" Left="8" Style="sty_Label" TabOrder="12" Text="수납구분" Top="28" VAlign="Middle" Width="88"></Static>
		<Edit AutoSelect="TRUE" Border="Flat" Enable="FALSE" Height="20" Id="edSetlmtGubun" ImeMode="native" Left="100" LeftMargin="2" OnFocus="gfn_ComponentOnFocus" OnKeyDown="gfn_EnterNextFocus" OnKillFocus="gfn_ComponentOnKillFocus" Readonly="TRUE" Style="sty_Edit" TabOrder="1" Top="28" UserData="S" Width="72"></Edit>
		<Static Align="Center" Height="20" Id="lbRepay" Left="20" Style="sty_LabelGruopBox" TabOrder="14" Text="결제정보" Top="4" VAlign="Middle" Width="100"></Static>
		<Static Height="20" Id="lbBank" Left="100" Style="sty_Text" TabOrder="15" Text="▶&#32;입금은행&#32;:" Top="148" VAlign="Middle" Width="108"></Static>
		<Static Height="20" Id="lbBankNm" Left="183" Style="sty_Text" TabOrder="18" Top="148" VAlign="Middle" Width="176"></Static>
		<Static Height="20" Id="lbAccount" Left="100" Style="sty_Text" TabOrder="17" Text="▶&#32;가상계좌&#32;:" Top="168" VAlign="Middle" Width="120"></Static>
		<Static Height="20" Id="lbAccountNo" Left="183" Style="sty_Text" TabOrder="16" Top="168" VAlign="Middle" Width="172"></Static>
		<Button BKColor="user17" ButtonStyle="TRUE" Cursor="HAND" Font="굴림,10,Bold" Height="28" Id="btnEnd" Left="198" OnClick="lfn_End" Style="sty_Button" TabOrder="19" Text="결제&#32;완료" Top="356" Width="116"></Button>
		<Button BKColor="user17" ButtonStyle="TRUE" Cursor="HAND" Enable="FALSE" Font="굴림,10,Bold" Height="28" Id="btnSetlmt" Left="68" OnClick="btnSetlmt_OnClick" Style="sty_Button" TabOrder="20" Text="결제&#32;재시도" Top="356" Width="116"></Button>
		<Static Height="20" Id="lbReciept" Left="100" Style="sty_Text" TabOrder="23" Text="▶&#32;현금영수증번호&#32;:" Top="228" VAlign="Middle" Width="120"></Static>
		<Static Height="20" Id="lbUse" Left="100" Style="sty_Text" TabOrder="21" Text="▶&#32;현금영수증용도&#32;:" Top="208" VAlign="Middle" Width="116"></Static>
		<Static Height="20" Id="CashYnNm" Left="100" Style="sty_Text" TabOrder="26" Text="▶&#32;현금영수증여부&#32;:" Top="188" VAlign="Middle" Width="120"></Static>
		<Static Height="20" Id="lbCashYn" Left="216" Style="sty_Text" TabOrder="25" Top="188" VAlign="Middle" Width="172"></Static>
		<Static Height="20" Id="lbUseGubun" Left="216" Style="sty_Text" TabOrder="24" Top="208" VAlign="Middle" Width="176"></Static>
		<Static Height="20" Id="lbRecieptNo" Left="216" Style="sty_Text" TabOrder="22" Top="228" VAlign="Middle" Width="172"></Static>
		<Shape Bottom="352" Height="64" Id="shpGubunBox2" Left="4" LineColor="user15" Right="396" TabOrder="31" Top="288" Type="Rectangle" Width="392"></Shape>
		<Static Align="Center" Height="20" Id="lbResultLgd" Left="8" Style="sty_Label" TabOrder="29" Text="LG&#32;U+" Top="328" VAlign="Middle" Width="88"></Static>
		<Edit AutoSelect="TRUE" Border="Flat" Enable="FALSE" Height="20" Id="edResultLgd" ImeMode="native" Left="100" LeftMargin="2" OnFocus="gfn_ComponentOnFocus" OnKeyDown="gfn_EnterNextFocus" OnKillFocus="gfn_ComponentOnKillFocus" Readonly="TRUE" Style="sty_Edit" TabOrder="28" Top="328" UserData="S" Width="212"></Edit>
		<Edit AutoSelect="TRUE" Border="Flat" Enable="FALSE" Height="20" Id="edResultKems" ImeMode="native" Left="100" LeftMargin="2" OnFocus="gfn_ComponentOnFocus" OnKeyDown="gfn_EnterNextFocus" OnKillFocus="gfn_ComponentOnKillFocus" Readonly="TRUE" Style="sty_Edit" TabOrder="27" Top="304" UserData="S" Width="212"></Edit>
		<Static Align="Center" Height="20" Id="lbResultKems" Left="8" Style="sty_Label" TabOrder="30" Text="안전원" Top="304" VAlign="Middle" Width="88"></Static>
		<Static Height="20" Id="lbResultKemsText" Left="316" Style="sty_Text" TabOrder="33" Text="(단위시스템)" Top="305" VAlign="Middle" Width="76"></Static>
		<Static Height="20" Id="lbResultLgdText" Left="316" Style="sty_Text" TabOrder="34" Text="(실시간조회)" Top="329" VAlign="Middle" Width="76"></Static>
		<Static Align="Center" Height="20" Id="lbResult" Left="20" Style="sty_LabelGruopBox" TabOrder="32" Text="현금영수증&#32;처리결과" Top="280" VAlign="Middle" Width="156"></Static>
	</Form>
	<Script><![CDATA[/*
 * 프로그램명 : frmcust2024PPosResultCas.xml
 * 설명 : 가상계좌 결제 처리결과
 * 작성일 : 2009.12.08
 * 작성자 : 김동현
 */

#include "LIB::COMMON.js"; // 공통 관련

/* 공통 필수 시작 */
function Form_OnLoadCompleted(obj) {
    gfn_Form_OnLoadCompleted(obj); // 공통 폼 로딩 이벤트 처리
    
    gfn_SearchPosResult(sPmYear, sPmMgno, gds_oPosResult);

    edSetlmtGubun.Text = gds_oPosResult.GetColumn(0, "SUNAPGUBUN");
    edPersonNm.Text = gds_oPosResult.GetColumn(0, "BUYER");
    edProductInfo.Text = gds_oPosResult.GetColumn(0, "PGMNM");
    edOrderNo.Text = gds_oPosResult.GetColumn(0, "JUMUNNO");
    edSunapGubun.Text = gds_oPosResult.GetColumn(0, "PAYMENT");
    medAmount.Value = sAmount;

	lbBankNm.Text = gds_oPosResult.GetColumn(0, "VIRTBANKNM");
	lbAccountNo.Text = gds_oPosResult.GetColumn(0, "VIRTACCOUNT");
	
    lbCashYn.Text = iif(gfn_IsNull(gds_oPosResult.GetColumn(0, "CASHCARDNO")), '아니오', '예'); // 현금영수증여부
    lbUseGubun.Text = gds_oPosResult.GetColumn(0, "CASHRECEIPTUSE"); // 현금영수증발급용도
    lbRecieptNo.Text = gds_oPosResult.GetColumn(0, "CASHCARDNO"); // 현금영수증번호
    edResultLgd.Text = sLgdMsg;
    edResultKems.Text = sKemsMsg;


    if(sSunapGubun == "1") { //환불일 경우
    
        switch(sSunapCode) {
            case "13": case "23": //가상계좌 일반
                lbResult.Visible = false;
                shpGubunBox2.Visible = false;
                lbResultKems.Visible = false;
                edResultKems.Visible = false;
                lbResultLgd.Visible = false;
                edResultLgd.Visible = false;
                lbResultKemsText.Visible = false;
                lbResultLgdText.Visible = false;
                window.Height = window.Height - 76;
                
                sTransYn = "N";
                btnSetlmt.Visible = false;
                btnEnd.Top = 280;
                btnEnd.Left = 140;
                btnEnd.Text = "환불 완료";
                return;
                
            case "15": case "25": //가상계좌 현금영수증
                btnSetlmt.Text = "결제 재시도";
                btnEnd.Text = "결제 완료";
                break;
        }
    }
    
    if (sTransYn == "Y") {
        btnSetlmt.Enable = true;
        btnEnd.Text = "종료";
    }

}

function Form_OnUnloadCompleted(obj) {
    if (sTransYn == "Y") {
        Close("FAIL");
    } else {
        Close("OK");
    }
}

function Form_OnKeyDown(obj,objSenderObj,nChar,bShift,bControl,bAlt,nLLParam,nHLParam) {
    switch (nChar) {
        case 27 : // 종료(Esc)
            lfn_End();
            break;
    }
}

/*
 * 기능 : 종료
 */
function lfn_End(obj) {
    if (sTransYn == "Y") {
        Close("FAIL");
    } else {
        Close("OK");
    }
}


/* 사용자 이벤트 함수 */
function btnSetlmt_OnClick(obj) {
	Close("RETRANS");
}
]]></Script>
</Window>