<?xml version="1.0" encoding="utf-8"?>
<Window>
	<Form BKColor="user0" Height="160" Id="frmprofes0001S01ProfMgmt" Left="8" OnLoadCompleted="Form_OnLoadCompleted" PidAttrib="7" Style="sty_Form" Title="기본정보" Top="8" Ver="1.0" Width="1064" WorkArea="true">
		<Datasets>
			<Dataset DataSetType="Dataset" Id="ds_oProfGubun">
				<Contents>
					<colinfo id="CD" size="256" summ="default" type="STRING"/>
					<colinfo id="DATA" size="256" summ="default" type="STRING"/>
					<record>
						<CD>1</CD>
						<DATA>전임</DATA>
					</record>
					<record>
						<CD>2</CD>
						<DATA>겸임</DATA>
					</record>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_ioProfBasicInfo" OnColumnChanged="ds_ioProfBasicInfo_OnColumnChanged">
				<Contents>
					<colinfo id="INSACODE" size="8" summ="default" type="STRING"/>
					<colinfo id="PFEDATE" size="8" summ="default" type="STRING"/>
					<colinfo id="PFGUBUN" size="1" summ="default" type="STRING"/>
					<colinfo id="PFNM" size="71" summ="default" type="STRING"/>
					<colinfo id="PFREMARK" size="200" summ="default" type="STRING"/>
					<colinfo id="PFTEAM" size="70" summ="default" type="STRING"/>
					<colinfo id="JIKRYUL" size="8" summ="default" type="STRING"/>
					<colinfo id="PFGUBUN2" size="256" summ="default" type="STRING"/>
					<colinfo id="PFGUBUN3" size="256" summ="default" type="STRING"/>
					<colinfo id="PFSTARTDATE" size="256" summ="default" type="STRING"/>
					<colinfo id="PFENDDATE" size="256" summ="default" type="STRING"/>
					<colinfo id="PFJIBU" size="256" summ="default" type="STRING"/>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_ioProfPersonSchool">
				<Contents>
					<colinfo id="HCNM" size="100" type="STRING"/>
					<colinfo id="PSNAME" size="100" type="STRING"/>
					<colinfo id="PSSABUN" size="8" type="STRING"/>
					<colinfo id="PSSUBJECT" size="100" type="STRING"/>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_oProfGubun2">
				<Contents>
					<colinfo id="CD" size="256" summ="default" type="STRING"/>
					<colinfo id="DATA" size="256" summ="default" type="STRING"/>
					<record>
						<CD></CD>
						<DATA>&#32;</DATA>
					</record>
					<record>
						<CD>A</CD>
						<DATA>교수</DATA>
					</record>
					<record>
						<CD>B</CD>
						<DATA>부교수</DATA>
					</record>
					<record>
						<CD>C</CD>
						<DATA>조교수</DATA>
					</record>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_oProfGubun3">
				<Contents>
					<colinfo id="CD" size="256" summ="default" type="STRING"/>
					<colinfo id="DATA" size="256" summ="default" type="STRING"/>
					<record>
						<CD></CD>
						<DATA>&#32;</DATA>
					</record>
					<record>
						<CD>A</CD>
						<DATA>교수</DATA>
					</record>
					<record>
						<CD>B</CD>
						<DATA>부교수</DATA>
					</record>
					<record>
						<CD>C</CD>
						<DATA>기타</DATA>
					</record>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_PFJIBU">
				<Contents>
					<colinfo id="CD" size="256" summ="default" type="STRING"/>
					<colinfo id="DATA" size="256" summ="default" type="STRING"/>
					<record>
						<CD></CD>
						<DATA>&#32;</DATA>
					</record>
					<record>
						<CD>0211</CD>
						<DATA>감사실</DATA>
					</record>
					<record>
						<CD>0220</CD>
						<DATA>정책연구소</DATA>
					</record>
					<record>
						<CD>0240</CD>
						<DATA>경영관리부</DATA>
					</record>
					<record>
						<CD>0250</CD>
						<DATA>교육부</DATA>
					</record>
					<record>
						<CD>0260</CD>
						<DATA>안전관리부</DATA>
					</record>
					<record>
						<CD>0270</CD>
						<DATA>홍보부</DATA>
					</record>
					<record>
						<CD>1011</CD>
						<DATA>서울</DATA>
					</record>
					<record>
						<CD>1151</CD>
						<DATA>서울동부</DATA>
					</record>
					<record>
						<CD>1021</CD>
						<DATA>부산</DATA>
					</record>
					<record>
						<CD>1031</CD>
						<DATA>대구경북</DATA>
					</record>
					<record>
						<CD>1041</CD>
						<DATA>인천</DATA>
					</record>
					<record>
						<CD>1051</CD>
						<DATA>광주전남</DATA>
					</record>
					<record>
						<CD>1061</CD>
						<DATA>대전충남</DATA>
					</record>
					<record>
						<CD>1131</CD>
						<DATA>울산</DATA>
					</record>
					<record>
						<CD>1081</CD>
						<DATA>경기</DATA>
					</record>
					<record>
						<CD>1141</CD>
						<DATA>경기북부</DATA>
					</record>
					<record>
						<CD>1091</CD>
						<DATA>강원&#32;</DATA>
					</record>
					<record>
						<CD>1101</CD>
						<DATA>충북</DATA>
					</record>
					<record>
						<CD>1111</CD>
						<DATA>전북</DATA>
					</record>
					<record>
						<CD>1071</CD>
						<DATA>경남</DATA>
					</record>
					<record>
						<CD>1121</CD>
						<DATA>제주</DATA>
					</record>
				</Contents>
			</Dataset>
			<Dataset CanRowPosChange="ds_ioListDelete_CanRowPosChange" DataSetType="Dataset" Id="ds_ioListDelete">
				<Contents>
					<colinfo id="SEL" size="256" summ="default" type="STRING"/>
				</Contents>
			</Dataset>
		</Datasets>
		<Shape Bottom="153" Height="149" Id="shpGubunBox1" Left="4" LineColor="user15" Right="1052" TabOrder="18" Top="4" Type="Rectangle" Width="1048"></Shape>
		<Static Align="Center" Height="20" Id="lbProfessorGubun" Left="424" Style="sty_Label" TabOrder="16" Text="교수구분" Top="41" VAlign="Middle" Width="88"></Static>
		<Static Align="Center" Height="20" Id="Static8" Left="-144" Style="sty_LabelGruopBox" TabOrder="19" Text="안전원&#32;교수&#32;관리" Top="63" VAlign="Middle" Width="120"></Static>
		<Static Align="Center" Height="20" Id="lbJibu" Left="8" Style="sty_Label" TabOrder="10" Text="부서/지부" Top="62" VAlign="Middle" Width="88"></Static>
		<Combo BindDataset="ds_ioProfBasicInfo" Border="Flat" CodeColumn="CD" Column="PFGUBUN" DataColumn="DATA" Height="20" Id="cbxProfGubun" INDEX="0" InnerDataset="ds_oProfGubun" Left="513" OnFocus="gfn_ComponentOnFocus" OnKillFocus="gfn_ComponentOnKillFocus" ResetIndex="FIRST" Search="NOTFILTERED" Style="sty_Combo" TabOrder="3" Top="40" UserData="I" Width="98"></Combo>
		<Static Align="Center" Height="20" Id="lbUserNm" Left="8" Style="sty_Label" TabOrder="14" Text="성명" Top="40" VAlign="Middle" Width="88"></Static>
		<Edit AutoSelect="TRUE" BindDataset="ds_ioProfBasicInfo" Border="Flat" Column="PFNM" Enable="FALSE" Height="20" Id="edUserNm" ImeMode="native" Left="97" LeftMargin="2" OnFocus="gfn_ComponentOnFocus" OnKillFocus="gfn_ComponentOnKillFocus" Readonly="TRUE" Style="sty_Edit" TabOrder="6" Top="40" UserData="I" Width="104"></Edit>
		<Edit AutoSelect="TRUE" BindDataset="ds_ioProfBasicInfo" Border="Flat" Column="PFTEAM" Enable="FALSE" Height="20" Id="edJibu" ImeMode="native" Left="97" LeftMargin="2" OnClick="lfn_End" OnFocus="gfn_ComponentOnFocus" OnKillFocus="gfn_ComponentOnKillFocus" Readonly="TRUE" Style="sty_Edit" TabOrder="7" Top="62" UserData="I" Width="104"></Edit>
		<Calendar BindDataset="ds_ioProfBasicInfo" Border="Flat" Column="PFEDATE" Dateformat="yyyy-MM-dd" DayFont="돋음,9" DaySelect="Auto" EditAlign="CENTER" HeaderFont="돋음,10,Bold" Height="20" Id="calProfEnterDate" Left="319" OnFocus="gfn_ComponentOnFocus" OnKeyDown="gfn_EnterNextFocus" OnKillFocus="gfn_ComponentOnKillFocus" SaturdayTextColor="blue" SelectedDayFont="돋음,9,Bold" Style="sty_Calendar" SundayTextColor="red" TabOrder="2" Top="63" UserData="I" WeeksFont="돋음,9" Width="97"></Calendar>
		<Static Align="Center" Height="20" Id="lbProfessorDate" Left="230" Style="sty_Label" TabOrder="11" Text="교수임명일" Top="63" VAlign="Middle" Width="88"></Static>
		<Static Align="Center" Height="20" Id="lbSchoolCareer" Left="8" Style="sty_Label" TabOrder="12" Text="학력" Top="84" VAlign="Middle" Width="88"></Static>
		<Edit AutoSelect="TRUE" BindDataset="ds_ioProfPersonSchool" Border="Flat" Column="PSNAME" Enable="FALSE" Height="20" Id="edSchoolCareer" ImeMode="native" Left="97" LeftMargin="2" OnFocus="gfn_ComponentOnFocus" OnKillFocus="gfn_ComponentOnKillFocus" Readonly="TRUE" Style="sty_Edit" TabOrder="4" Top="84" UserData="I" Width="319"></Edit>
		<Static Align="Center" Height="42" Id="lbRemark" Left="8" Style="sty_Label" TabOrder="13" Text="비고" Top="106" VAlign="Middle" Width="88"></Static>
		<Static Height="20" Id="lbText" Left="12" Style="sty_Text" TabOrder="17" Text="■&#32;기본정보" Top="12" VAlign="Middle" Width="244"></Static>
		<Static Align="Center" Height="20" Id="lbJikRyul" Left="230" Style="sty_Label" TabOrder="15" Text="직위" Top="41" VAlign="Middle" Width="88"></Static>
		<Edit AutoSelect="TRUE" BindDataset="ds_ioProfBasicInfo" Border="Flat" Column="JIKRYUL" Enable="FALSE" Height="20" Id="edJikRyul" ImeMode="native" Left="320" LeftMargin="2" OnFocus="gfn_ComponentOnFocus" OnKillFocus="gfn_ComponentOnKillFocus" Readonly="TRUE" Style="sty_Edit" TabOrder="8" Top="41" UserData="I" Width="95"></Edit>
		<Static Align="Center" Height="20" Id="lbInsaCode" Left="152" Style="sty_Label" TabOrder="9" Text="사번" Top="12" VAlign="Middle" Visible="FALSE" Width="88"></Static>
		<Edit AutoSelect="TRUE" BindDataset="ds_ioProfBasicInfo" Border="Flat" Column="INSACODE" Enable="FALSE" Height="20" Id="edInsaCode" ImeMode="native" Left="242" LeftMargin="2" OnFocus="gfn_ComponentOnFocus" OnKillFocus="gfn_ComponentOnKillFocus" Readonly="TRUE" Style="sty_Edit" TabOrder="5" Top="12" Width="104"></Edit>
		<Button ButtonStyle="TRUE" Cursor="HAND" Height="22" Id="btnSearchUser" ImageID="BTN_SEARCH" Left="202" OnClick="btnSearchUser_OnClick" Style="sty_Button" TabOrder="1" Top="40" Transparent="TRUE" Visible="FALSE" Width="22"></Button>
		<TextArea BindDataset="ds_ioProfBasicInfo" Border="Flat" Column="PFREMARK" Height="42" Id="taRemark" Left="97" OnFocus="gfn_ComponentOnFocus" OnKeyDown="gfn_EnterNextFocus" OnKillFocus="gfn_ComponentOnKillFocus" Style="sty_TextArea" TabOrder="20" Top="106" VScroll="TRUE" Width="320"></TextArea>
		<Combo BindDataset="ds_ioProfBasicInfo" Border="Flat" CodeColumn="CD" Column="PFGUBUN2" DataColumn="DATA" Height="20" Id="cbxProfGubun2" ImeMode="none" INDEX="0" InnerDataset="ds_oProfGubun2" Left="513" OnFocus="gfn_ComponentOnFocus" OnKillFocus="gfn_ComponentOnKillFocus" ResetIndex="FIRST" Search="NOTFILTERED" Style="sty_Combo" TabOrder="21" Top="84" UserData="I" Width="98"></Combo>
		<Static Align="Center" Height="20" Id="Static0" Left="424" Style="sty_Label" TabOrder="22" Text="강의전담" Top="107" VAlign="Middle" Width="88"></Static>
		<Combo BindDataset="ds_ioProfBasicInfo" Border="Flat" CodeColumn="CD" Column="PFGUBUN3" DataColumn="DATA" Height="20" Id="cbxProfGubun3" INDEX="0" InnerDataset="ds_oProfGubun3" Left="513" OnFocus="gfn_ComponentOnFocus" OnKillFocus="gfn_ComponentOnKillFocus" ResetIndex="FIRST" Search="NOTFILTERED" Style="sty_Combo" TabOrder="23" Top="106" UserData="I" Width="98"></Combo>
		<Static Align="Center" Height="20" Id="Static1" Left="424" Style="sty_Label" TabOrder="25" Text="지정일" Top="129" VAlign="Middle" Width="88"></Static>
		<Calendar BindDataset="ds_ioProfBasicInfo" Border="Flat" Column="PFSTARTDATE" Dateformat="yyyy-MM-dd" DayFont="돋음,9" DaySelect="Auto" EditAlign="CENTER" HeaderFont="돋음,10,Bold" Height="20" Id="calPFSTARTDATE" Left="513" OnFocus="gfn_ComponentOnFocus" OnKeyDown="gfn_EnterNextFocus" OnKillFocus="gfn_ComponentOnKillFocus" SaturdayTextColor="blue" SelectedDayFont="돋음,9,Bold" Style="sty_Calendar" SundayTextColor="red" TabOrder="24" Top="129" UserData="I" WeeksFont="돋음,9" Width="97"></Calendar>
		<Static Align="Center" Height="20" Id="Static2" Left="424" Style="sty_Label" TabOrder="26" Text="배정지부" Top="63" VAlign="Middle" Width="88"></Static>
		<Combo BindDataset="ds_ioProfBasicInfo" Border="Flat" CodeColumn="CD" Column="PFJIBU" DataColumn="DATA" Height="20" Id="cbxJibu" ImeMode="none" INDEX="0" InnerDataset="ds_PfJibu" Left="513" OnFocus="gfn_ComponentOnFocus" OnKillFocus="gfn_ComponentOnKillFocus" ResetIndex="FIRST" Search="NOTFILTERED" Style="sty_Combo" TabOrder="27" Top="62" UserData="I" Width="98"></Combo>
		<Static Align="Center" Height="20" Id="Static3" Left="424" Style="sty_Label" TabOrder="28" Text="전임상세" Top="85" VAlign="Middle" Width="88"></Static>
		<Button ButtonStyle="TRUE" Cursor="HAND" Height="22" Id="btnReport" ImageID="BTN_TEXT_08" Left="1096" OnClick="btnReport_OnClick" Style="sty_Button" TabOrder="29" Text="이력조회" Top="16" Transparent="TRUE" Visible="FALSE" Width="119"></Button>
		<Grid AutoEnter="TRUE" AutoFit="TRUE" AutoSelect="TRUE" BindDataset="ds_ioListDelete" BkColor2="user2" BkSelColor="user3" BoldHead="true" Border="Flat" Bottom="148" ColSizing="TRUE" Enable="true" EndLineColor="default" FillAreaType="All" HeadBorder="Flat" HeadHeight="20" Height="107" Id="gdProfUser" InputPanel="FALSE" Left="616" LineColor="default" MinWidth="100" Right="1047" RowHeight="20" Style="sty_Grid" TabOrder="30" TabStop="true" Top="41" UseDBuff="true" UsePopupMenu="true" UserData="안전원교수관리목록" UseSelColor="true" Visible="true" VLineColor="default" WheelScrollRow="1" Width="431">
			<contents>
				<format id="Default">
					<columns>
						<col width="40"/>
						<col width="100"/>
						<col width="90"/>
						<col width="90"/>
						<col width="90"/>
						<col width="90"/>
					</columns>
					<head>
						<cell align="center" col="0" display="text" text="순번"/>
						<cell align="center" col="1" display="text" text="배정지부"/>
						<cell col="2" display="text" text="전임상세"/>
						<cell col="3" display="text" text="강의전담"/>
						<cell col="4" display="text" text="지정일"/>
						<cell col="5" display="text" text="종료일"/>
					</head>
					<body>
						<cell align="center" col="0" display="text" expr="currow+1"/>
						<cell align="center" col="1" colid="JIBUNM" display="text"/>
						<cell align="center" col="2" colid="PFGUBUN2" display="text"/>
						<cell align="center" col="3" colid="PFGUBUN3" display="text"/>
						<cell align="center" col="4" colid="PFSTARTDATE" display="date"/>
						<cell align="center" col="5" colid="PFENDDATE" display="date"/>
					</body>
				</format>
			</contents>
		</Grid>
		<Button ButtonStyle="TRUE" Cursor="HAND" Height="22" Id="btn_Delete" ImageID="BTN_TEXT_05" Left="967" OnClick="btn_Delete_OnClick" Style="sty_Button" TabOrder="31" Text="데이터삭제" Top="16" Transparent="TRUE" Width="80"></Button>
	</Form>
	<Script><![CDATA[/*
 * 프로그램명 : frmPFM0001S01ProfMgmt.xml
 * 설명 : 기본정보
 * 작성일 : 2009.11.06
 * 작성자 : 김종복
 */

#include "LIB::profes.js"; // 공통업무 관련

/* 공통 필수 시작 */
function Form_OnLoadCompleted(obj) {
	tit_createActionInfo(); // X-Framework용    
    gfn_MakeRequiredInputMark(this); // 필수 입력란을 설정한다.

    ms_FormAuth = gfn_GetFormAuth(this); // 권한을 조회한다.
    if (ms_FormAuth == "W") { // 권한에 따른 버튼 설정
        lfn_SetFormAuth(true); // 저장 권한
    } else if (ms_FormAuth == "R") {
        lfn_SetFormAuth(false); // 읽기 권한
    } else {
        gfn_Alert(MSGI00080);
        close();
    }    
    
    
    //gfn_SearchAllJibu(cbxJibu, "", ""); // 지부 코드 조회
    //gfn_SearchJibu(cbxJibu, "Y", " "); // 지부 코드 조회
    cbxJibu.Index = 0;
}

/*
 * 기능 : 버튼 활성/비활성시킨다.
 * parameter : bStatus - 활성/비활성여부(true:활성, false:비활성)
 * return : 없음
 */
function lfn_SetFormAuth(bStatus) {
    lbSchoolCareer.Visible = bStatus;
    edSchoolCareer.Visible = bStatus;
}

/*
 * 기능 : 기본정보 조회
 * parameter : 없음
 * Return : 없음
 */
function lfn_SearchProfBasicInfo(obj) {
	ds_ioProfBasicInfo.ClearData(); // 데이타셋 초기화
	tit_clearActionInfo();
	
	tit_addSearchActionInfo("profes:searchProfes0001ProfBasicInfo", false);
	// 서버 호출 
	tit_callService(
		""
		,""
		,""	// inDs
		,"ds_ioProfBasicInfo=ds_oProfData" // outDs
		,"INSACODE=" + quote(ds_ioProfUser.getColumn(ds_ioProfUser.row, "INSACODE")) //-- 사번 // args 
		,"lfn_AfterSearchProfBasicInfo"
		,false
		,false
		,true
	);
}

/*
 * 기능 : 기본정보 조회 후 처리해야 할 내용
 * parameter : nErrorCode - 에러코드
 *             strErrorMsg - 에러메시지
 * Return : 없음
 */
function lfn_AfterSearchProfBasicInfo(nErrorCode, strErrorMsg) {
    if (nErrorCode != 0) { // 트랜잭션 에러를 처리한다.
        gfn_ErrorMsg(nErrorCode, strErrorMsg);
        return;
    }
    
    if (ds_ioProfBasicInfo.GetRowCount() > 0) {
		// 메인그리드에 적용
		ds_ioProfUser.setColumn(ds_ioProfUser.row, "PFGUBUN", cbxProfGubun.Value);
		ds_ioProfUser.setColumn(ds_ioProfUser.row, "PFNM", edUserNm.Text);
		ds_ioProfUser.setColumn(ds_ioProfUser.row, "PFREMARK", taRemark.Text);
		ds_ioProfUser.setColumn(ds_ioProfUser.row, "INSACODE", edInsaCode.Text);
		ds_ioProfUser.setColumn(ds_ioProfUser.row, "JIKRYUL", edJikRyul.Text);
		ds_ioProfUser.setColumn(ds_ioProfUser.row, "PFTEAM", edJibu.Text);
		ds_ioProfUser.setColumn(ds_ioProfUser.row, "PFGUBUN2", cbxProfGubun2.Value);
		ds_ioProfUser.setColumn(ds_ioProfUser.row, "PFGUBUN3", cbxProfGubun3.Value);
	} else {
		ds_ioProfBasicInfo.AddRow(); // Dataset에 빈 Record한줄 추가
		ds_ioProfBasicInfo.SetColumn(0, "PFGUBUN", "1");
		ds_ioProfUser.SetColumn(ds_ioProfUser.row, "PFGUBUN", "1");
		// ds_ioProfBasicInfo.SetRowType(0, "insert");
	}
	
	lfn_Search();
}

/*
 * 기능 : 학력정보 조회
 * parameter : 없음
 * Return : 없음
 */
function lfn_SearchProfPersonSchool(obj) {
	ds_ioProfPersonSchool.ClearData(); // 데이타셋 초기화
	tit_clearActionInfo();
	
	tit_addSearchActionInfo("profes:searchProfes0001ProfPersonSchool", false);
	// 서버 호출 
	tit_callService(
		""
		,""
		,""	// inDs
		,"ds_ioProfPersonSchool=ds_oProfData" // outDs
		,"INSACODE=" + quote(ds_ioProfUser.getColumn(ds_ioProfUser.currow, "INSACODE")) //-- 사번 // args 
		,"lfn_AfterSearchProfPersonSchool"
		,false
		,false
		,true
	);
}

/*
 * 기능 : 학력정보 조회 후 처리해야 할 내용
 * parameter : nErrorCode - 에러코드
 *             strErrorMsg - 에러메시지
 * Return : 없음
 */
function lfn_AfterSearchProfPersonSchool(nErrorCode, strErrorMsg) {
    if (nErrorCode != 0) { // 트랜잭션 에러를 처리한다.
        gfn_ErrorMsg(nErrorCode, strErrorMsg);
        return;
    }
}

/*
 * 기능 : 사용자정보검색 팝업을 호출한다.
 */
function btnSearchUser_OnClick(obj) {
	var arrProfUser = gfn_ProfUserListPopup("", "");
    if (length(arrProfUser) > 0) {
        edInsaCode.Text = arrProfUser[0]; // 사번
        edUserNm.Text = arrProfUser[1]; // 성명
        edJikRyul.Text = arrProfUser[2]; // 직렬
        edJibu.Text = arrProfUser[3]; // 부서/지부
        // 메인그리드에 적용
		ds_ioProfUser.setColumn(ds_ioProfUser.row, "PFNM", edUserNm.Text);
		ds_ioProfUser.setColumn(ds_ioProfUser.row, "INSACODE", edInsaCode.Text);
		ds_ioProfUser.setColumn(ds_ioProfUser.row, "JIKRYUL", edJikRyul.Text);
		ds_ioProfUser.setColumn(ds_ioProfUser.row, "PFTEAM", edJibu.Text);
    }
}

/*
 * 기능 : Dataset의 Column 값이 변경된 후
 */
function ds_ioProfBasicInfo_OnColumnChanged(obj,nRow,strColumnID,varOldValue,varNewValue,nPivotIndex) {
	switch (strColumnID) {
		case "PFGUBUN":
			ds_ioProfUser.setColumn(ds_ioProfUser.row, "PFGUBUN", cbxProfGubun.Value);
			break;
		case "PFREMARK":
			ds_ioProfUser.setColumn(ds_ioProfUser.row, "PFREMARK", taRemark.Text);
			break;
		default:
			break;
	}
}

/*
 * 기능 : 기본정보 저장
 * parameter : 없음
 * Return : 없음
 */
function lfn_SaveProfBasicInfo(obj) {
	// if (!gfn_FormValidate(this)) { // 입력 Validation Check
        // return false;
    // }
	
	tit_clearActionInfo();
    tit_AddSaveActionInfo(	
        "profes:insertProfes0001ProfBasicInfo" // insert  		
        , "profes:updateProfes0001ProfBasicInfo" // update  
        , "" // delete
        , "" // flag column 명
        , "" // key sql id
        , 0	// key 증가 값
        , "" 
        , 0 
        , "N" // 실행타입
    );
    // 서버 호출 
    tit_callService(
        ""
        ,""
        ,"ds_iProfData=ds_ioProfBasicInfo:U" // inDs		
        ,""	// outDs
        ,"PSABUN=" + gds_oUserInfo.GetColumn(0, "PSABUN") //-- 작성자사번 // args 
        ,"lfn_AfterSaveProfBasicInfo"
        ,false
        ,false
		,true
    );
    
    //교수구분 상세 , 강의전담을 별도로 관리해서 통계에서 활용해야 하므로 
    //해당 HISTORY를 별도로 관리하여 저장한다. 
    var ls_ServiceName = "profes:insertProfes0001ProfBasicInfo_History";
	var ls_CallBackServiceName = "lfn_AfterSaveProfBasicInfo_History";
	var sArg = "PSABUN=" 			+ quote(edInsaCode.Text);
		 sArg += " PFGUBUN2=" 		+ quote(cbxProfGubun2.Value);
		 sArg += " PFGUBUN3=" 		+ quote(cbxProfGubun3.Value);
		 sArg += " PFSTARTDATE=" 	+ quote(calPFSTARTDATE.Value);
		 sArg += " PFJIBU=" 		+ quote(cbxJibu.Value);
	
	tit_clearActionInfo(); 
	tit_addSingleActionInfo(ls_ServiceName, "", 0, "");
	// 서버 호출
	tit_callService(
		""
		,""
		,""    // inDs
		,""    // outDs
		,sArg    // args
		,ls_CallBackServiceName
		,false
		,false
		,true
	);	   
}

function lfn_AfterSaveProfBasicInfo_History(nErrorCode, strErrorMsg) {
    if (nErrorCode != 0) { // 트랜잭션 에러를 처리한다.
        gfn_ErrorMsg(nErrorCode, strErrorMsg);
        return;
    }
}

/*
 * 기능 :  기본정보 저장 후 처리해야 할 내용
 * parameter : nErrorCode - 에러코드
 *             strErrorMsg - 에러메시지
 * Return : 없음
 */
function lfn_AfterSaveProfBasicInfo(nErrorCode, strErrorMsg) {
    if (nErrorCode != 0) { // 트랜잭션 에러를 처리한다.
        gfn_ErrorMsg(nErrorCode, strErrorMsg);
        return;
    }
}

/*
 * 기능 : 기본정보 삭제
 * parameter : 없음
 * Return : 없음
 */
function lfn_DelProfBasicInfo(obj) {
	tit_clearActionInfo();
    tit_AddSingleActionInfo("profes:deleteProfes0001ProfBasicInfo", "", 0, "", "N");
    // 서버 호출 
    tit_callService(
        ""
        ,""
        ,"ds_iProfData=ds_ioProfBasicInfo:A" // inDs		
        ,""	// outDs
        ,"PSABUN=" + gds_oUserInfo.GetColumn(0, "PSABUN") //-- 작성자사번 // args 
        ,"lfn_AfterDelProfBasicInfo"
        ,false
        ,false
		,true
    );
}

/*
 * 기능 :  기본정보 삭제 후 처리해야 할 내용
 * parameter : nErrorCode - 에러코드
 *             strErrorMsg - 에러메시지
 * Return : 없음
 */
function lfn_AfterDelProfBasicInfo(nErrorCode, strErrorMsg) {
    if (nErrorCode != 0) { // 트랜잭션 에러를 처리한다.
        gfn_ErrorMsg(nErrorCode, strErrorMsg);
        return;
    }
}

function btnReport_OnClick(obj)
{
	var sArg  = " INSACODE=" + quote(edInsaCode.Text);      
    Dialog("profes::frmprofes0001ProfessorpfDelete.xml", sArg, 600, 400, "", -1, -1);
	
}

function lfn_Search(obj) {

	ds_ioListDelete.ClearData(); // 데이타셋 초기화
	tit_clearActionInfo();
	tit_addSearchActionInfo("profes:searchprofes0001ProfessorpfDelete", false);
	// 서버 호출 
	tit_callService(
		""
		,""
		,""	// inDs
		,"ds_ioListDelete=ds_ioListDelete" // outDs
		,"INSACODE=" + quote(edInsaCode.Text) //-- 사번 // args 
		,"lfn_AfterSearchProfDeleteList"
		,false
		,false
		,true
	);
}

function lfn_AfterSearchProfDeleteList(nErrorCode, strErrorMsg) {
    if (nErrorCode != 0) { // 트랜잭션 에러를 처리한다.
        gfn_ErrorMsg(nErrorCode, strErrorMsg);
        return;
    }
}

// 조회 후 callbackfunction lfn_AfterDelProfBasicInfo_3(nErrorCode, strErrorMsg)
{
    if (nErrorCode != 0) { // 트랜잭션 에러를 처리한다.
		gfn_ErrorMsg(nErrorCode, strErrorMsg);
        return;
    }
    
    gfn_Alert("삭제되었습니다.");
    lfn_SearchProfBasicInfo();
}

function ds_ioListDelete_CanRowPosChange(obj,nOldRow,nRow)
{
	if(ds_ioListDelete.GetRowCount() == 0)
	{
		cbxProfGubun.Value = ds_ioListDelete.GetColumn(0, "PFGUBUN");
		cbxJibu.Value = ds_ioListDelete.GetColumn(0, "PFJIBU");
		cbxProfGubun2.Value = ds_ioListDelete.GetColumn(0, "PFGUBUN2_CD");
		cbxProfGubun3.Value = ds_ioListDelete.GetColumn(0, "PFGUBUN3_CD");
		calPFSTARTDATE.Value = ds_ioListDelete.GetColumn(0, "PFSTARTDATE");
	}
	else {
		cbxProfGubun.Value = ds_ioListDelete.GetColumn(nRow, "PFGUBUN");
		cbxJibu.Value = ds_ioListDelete.GetColumn(nRow, "PFJIBU");
		cbxProfGubun2.Value = ds_ioListDelete.GetColumn(nRow, "PFGUBUN2_CD");
		cbxProfGubun3.Value = ds_ioListDelete.GetColumn(nRow, "PFGUBUN3_CD");
		calPFSTARTDATE.Value = ds_ioListDelete.GetColumn(nRow, "PFSTARTDATE");
	}
	
}

function btn_Delete_OnClick(obj)
{
	if(gfn_Confirm("선택한 내역을 삭제하시겠습니까?."))
	{
		
		tit_clearActionInfo();
		tit_AddSingleActionInfo("profes:deleteProfes0001ProfBasicInfo_2", "", 0, "", "N");
		// 서버 호출 
		tit_callService(
			""
			,""
			,"ds_ioListDelete=ds_ioListDelete" // inDs		
			,""	// outDs
			,"INSACODE=" + quote(edInsaCode.Text)
			+" PFSTARTDATE=" + quote(ds_ioListDelete.GetColumn(ds_ioListDelete.GetCurrow(), "PFSTARTDATE")) 
			,"lfn_AfterDelProfBasicInfo_3"
			,false
			,false
			,true
		);			
	}	
}
]]></Script>
</Window>